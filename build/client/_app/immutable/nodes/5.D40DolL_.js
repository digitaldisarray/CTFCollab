var wt=Object.defineProperty;var at=t=>{throw TypeError(t)};var Dt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>Dt(t,typeof e!="symbol"?e+"":e,n),nt=(t,e,n)=>e.has(t)||at("Cannot "+n);var re=(t,e,n)=>(nt(t,e,"read from private field"),n?n.call(t):e.get(t)),Y=(t,e,n)=>e.has(t)?at("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Ke=(t,e,n)=>(nt(t,e,"access private method"),n);import{d as U,a,t as R,e as B}from"../chunks/CoWB_c7W.js";import{ac as Tt,ab as St,a5 as Ft,G as O,D as i,u as le,O as v,w as ie,U as be,P as b,Q as L,I as Rt,T as J,aq as zt,aD as we,R as oe,n as E,A as ve}from"../chunks/Cgeft74Y.js";import{s as vt}from"../chunks/5z2gxC1j.js";import{c as d}from"../chunks/BqR-gka9.js";import{i as pe,s as Ee,a as me,b as Le}from"../chunks/tsR4g0rO.js";import{g as mt,u as Nt,w as ot,E as It,S as Mt,h as At,i as Et,j as jt,m as pt,k as qt,l as Ot,n as se,o as xe,z as ye,s as Gt,a as Vt,C as Je,d as Qe,e as Xe,F as We,b as Ut,c as Bt,f as Ye,R as Ht,T as Kt,P as Lt}from"../chunks/Bii4bBgB.js";import{p as Q,r as je,s as ne,l as _t,a as ae}from"../chunks/DOLpMf4M.js";import{c as lt,B as $e}from"../chunks/DcQ22hbZ.js";import{b as Jt,I as De}from"../chunks/CKQFvGxp.js";import{g as Qt}from"../chunks/Cv5cQigG.js";import{I as bt,s as $t,c as Xt,g as Wt,a as Yt,b as Zt,d as er,T as tr,e as rr,f as sr,h as Ze,i as it,F as ct,j as ar,R as nr,k as or,D as lr,G as ir,l as cr,m as Pe,n as dr,E as ur,A as hr,r as et,o as dt}from"../chunks/DhcJXaWI.js";import{p as qe}from"../chunks/DojlfI03.js";import{s as ut,c as ht}from"../chunks/Iw3L7d7c.js";import{w as Ct,g as fr}from"../chunks/DIS1lw11.js";import{d as gr,e as vr}from"../chunks/DJoc1YTT.js";import{r as ft,a as tt}from"../chunks/HeQKgpHt.js";import"../chunks/GU8K1UcO.js";import{i as mr}from"../chunks/C-KXs9MO.js";import{o as kt}from"../chunks/Br5c-oLs.js";const pr=[];function _r(t,e=!1){return Te(t,new Map,"",pr)}function Te(t,e,n,u,o=null){if(typeof t=="object"&&t!==null){var m=e.get(t);if(m!==void 0)return m;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Tt(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var h=0;h<t.length;h+=1){var x=t[h];h in t&&(l[h]=Te(x,e,n,u))}return l}if(St(t)===Ft){l={},e.set(t,l),o!==null&&e.set(o,l);for(var w in t)l[w]=Te(t[w],e,n,u);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return Te(t.toJSON(),e,n,u,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const br="data-checkbox-root";var Se,Fe,Re,Ce,rt,ze,Ne;class $r{constructor(e,n=null){Y(this,Ce);ke(this,"opts");ke(this,"group");Y(this,Se,O(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current));Y(this,Fe,O(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current));Y(this,Re,O(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current));Y(this,ze,O(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current})));Y(this,Ne,O(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":At(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":Et(this.trueRequired),"data-disabled":jt(this.trueDisabled),"data-state":kr(this.opts.checked.current,this.opts.indeterminate.current),[br]:"",onclick:this.onclick,onkeydown:this.onkeydown})));this.opts=e,this.group=n,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),Nt(e),ot.pre([()=>{var u;return _r((u=this.group)==null?void 0:u.opts.value.current)},()=>this.opts.value.current],([u,o])=>{!u||!o||(this.opts.checked.current=u.includes(o))}),ot.pre(()=>this.opts.checked.current,u=>{var o,m;this.group&&(u?(o=this.group)==null||o.addValue(this.opts.value.current):(m=this.group)==null||m.removeValue(this.opts.value.current))})}get trueName(){return i(re(this,Se))}get trueRequired(){return i(re(this,Fe))}get trueDisabled(){return i(re(this,Re))}onkeydown(e){this.opts.disabled.current||(e.key===It&&e.preventDefault(),e.key===Mt&&(e.preventDefault(),Ke(this,Ce,rt).call(this)))}onclick(e){this.opts.disabled.current||Ke(this,Ce,rt).call(this)}get snippetProps(){return i(re(this,ze))}get props(){return i(re(this,Ne))}}Se=new WeakMap,Fe=new WeakMap,Re=new WeakMap,Ce=new WeakSet,rt=function(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current},ze=new WeakMap,Ne=new WeakMap;var Ie,Me,Ae;class Cr{constructor(e){ke(this,"root");Y(this,Ie,O(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current));Y(this,Me,O(()=>!!this.root.trueName));Y(this,Ae,O(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current})));this.root=e}get trueChecked(){return i(re(this,Ie))}get shouldRender(){return i(re(this,Me))}get props(){return i(re(this,Ae))}}Ie=new WeakMap,Me=new WeakMap,Ae=new WeakMap;function kr(t,e){return e?"indeterminate":t?"checked":"unchecked"}const xr=new mt("Checkbox.Group"),xt=new mt("Checkbox.Root");function yr(t,e){return xt.set(new $r(t,e))}function Pr(){return new Cr(xt.get())}var wr=R("<input>"),Dr=R("<input>");function Tr(t,e){le(e,!0);let n=Q(e,"value",15),u=je(e,["$$slots","$$events","$$legacy","value"]);const o=O(()=>pt(u,{"aria-hidden":"true",tabindex:-1,style:qt}));var m=U(),l=v(m);{var h=w=>{var y=wr();ft(y);let S;be(()=>S=tt(y,S,{...i(o),value:n()})),a(w,y)},x=w=>{var y=Dr();ft(y);let S;be(()=>S=tt(y,S,{...i(o)})),Jt(y,n),a(w,y)};pe(l,w=>{i(o).type==="checkbox"?w(h):w(x,!1)})}a(t,m),ie()}function Sr(t,e){le(e,!1);const n=Pr();mr();var u=U(),o=v(u);{var m=l=>{Tr(l,ne(()=>n.props))};pe(o,l=>{n.shouldRender&&l(m)})}a(t,u),ie()}var Fr=R("<button><!></button>"),Rr=R("<!> <!>",1);function zr(t,e){le(e,!0);let n=Q(e,"checked",15,!1),u=Q(e,"ref",15,null),o=Q(e,"disabled",3,!1),m=Q(e,"required",3,!1),l=Q(e,"name",3,void 0),h=Q(e,"value",3,"on"),x=Q(e,"id",19,Ot),w=Q(e,"indeterminate",15,!1),y=Q(e,"type",3,"button"),S=je(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type"]);const N=xr.getOr(null);N&&h()&&(N.opts.value.current.includes(h())?n(!0):n(!1));const C=yr({checked:se.with(()=>n(),s=>{var r;n(s),(r=e.onCheckedChange)==null||r.call(e,s)}),disabled:se.with(()=>o()??!1),required:se.with(()=>m()),name:se.with(()=>l()),value:se.with(()=>h()),id:se.with(()=>x()),ref:se.with(()=>u(),s=>u(s)),indeterminate:se.with(()=>w(),s=>{var r;w(s),(r=e.onIndeterminateChange)==null||r.call(e,s)}),type:se.with(()=>y())},N),k=O(()=>pt({...S},C.props));var j=Rr(),f=v(j);{var $=s=>{var r=U(),c=v(r),F=zt(()=>({props:i(k),...C.snippetProps}));ut(c,()=>e.child,()=>i(F)),a(s,r)},P=s=>{var r=Fr();let c;var F=L(r);ut(F,()=>e.children??Rt,()=>C.snippetProps),J(r),be(()=>c=tt(r,c,{...i(k)})),a(s,r)};pe(f,s=>{e.child?s($):s(P,!1)})}var H=b(f,2);Sr(H,{}),a(t,j),ie()}function Nr(t,e){const n=_t(e,["children","$$slots","$$events","$$legacy"]);bt(t,ne({name:"check"},()=>n,{iconNode:[["path",{d:"M20 6 9 17l-5-5"}]],children:(o,m)=>{var l=U(),h=v(l);$t(h,e,"default",{}),a(o,l)},$$slots:{default:!0}}))}function Ir(t,e){const n=_t(e,["children","$$slots","$$events","$$legacy"]);bt(t,ne({name:"minus"},()=>n,{iconNode:[["path",{d:"M5 12h14"}]],children:(o,m)=>{var l=U(),h=v(l);$t(h,e,"default",{}),a(o,l)},$$slots:{default:!0}}))}var Mr=R('<div class="flex size-4 items-center justify-center text-current"><!></div>');function Ar(t,e){le(e,!0);let n=Q(e,"ref",15,null),u=Q(e,"checked",15,!1),o=Q(e,"indeterminate",15,!1),m=je(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]);var l=U(),h=v(l);const x=O(()=>lt("border-primary ring-offset-background focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer box-content size-4 shrink-0 rounded-sm border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[disabled=true]:cursor-not-allowed data-[disabled=true]:opacity-50",e.class));d(h,()=>zr,(w,y)=>{y(w,ne({get class(){return i(x)}},()=>m,{get ref(){return n()},set ref(N){n(N)},get checked(){return u()},set checked(N){u(N)},get indeterminate(){return o()},set indeterminate(N){o(N)},children:(N,C)=>{let k=()=>C==null?void 0:C().checked,j=()=>C==null?void 0:C().indeterminate;var f=Mr(),$=L(f);{var P=s=>{Ir(s,{class:"size-3.5"})},H=s=>{const r=O(()=>lt("size-3.5",!k()&&"text-transparent"));Nr(s,{get class(){return i(r)}})};pe($,s=>{j()?s(P):s(H,!1)})}J(f),a(N,f)},$$slots:{default:!0}}))}),a(t,l),ie()}var Er=R("<!> <!>",1),jr=R('<div><div class="flex items-center py-4"><!></div> <div class="rounded-md border"><!></div> <div class="flex items-center justify-end space-x-2 py-4"><!> <!></div></div>');function qr(t,e){le(e,!0);const[n,u]=Ee(),o=()=>me(qe,"$page",n);let m=we(ae({pageIndex:0,pageSize:10})),l=we(ae([])),h=we(ae([]));const x=Xt({get data(){return e.data},columns:e.columns,getCoreRowModel:Wt(),getPaginationRowModel:Yt(),getSortedRowModel:Zt(),getFilteredRowModel:er(),onSortingChange:r=>{typeof r=="function"?oe(l,ae(r(i(l)))):oe(l,ae(r))},onPaginationChange:r=>{typeof r=="function"?oe(m,ae(r(i(m)))):oe(m,ae(r))},onColumnFiltersChange:r=>{typeof r=="function"?oe(h,ae(r(i(h)))):oe(h,ae(r))},state:{get pagination(){return i(m)},get sorting(){return i(l)},get columnFilters(){return i(h)}}}),w=(r,c)=>{if(console.log("Clicked row:",c.original),F(c.original)){let g=c.original;console.log("Challenge ID:",g.id);const p=new URLSearchParams(o().url.search).get("code");if(console.log("CTF Code:",p),!p){console.error("CTF code not found in URL");return}if(g.id.trim()){const I=`/pages/event-room/challenge?code=${encodeURIComponent(p)}&challenge=${g.id}`;console.log("Navigating to:",I),Qt(I)}}function F(g){return g.id!==void 0}};var y=jr(),S=L(y),N=L(S);const C=O(()=>{var r;return((r=x.getColumn("name"))==null?void 0:r.getFilterValue())??""});De(N,{placeholder:"Filter challenge by name...",get value(){return i(C)},onchange:r=>{var c;(c=x.getColumn("name"))==null||c.setFilterValue(r.currentTarget.value)},oninput:r=>{var c;(c=x.getColumn("name"))==null||c.setFilterValue(r.currentTarget.value)},class:"max-w-sm"}),J(S);var k=b(S,2),j=L(k);d(j,()=>tr,(r,c)=>{c(r,{children:(F,g)=>{var p=Er(),I=v(p);d(I,()=>rr,(_,G)=>{G(_,{children:(D,z)=>{var A=U(),M=v(A);xe(M,17,()=>x.getHeaderGroups(),T=>T.id,(T,V)=>{var X=U(),K=v(X);d(K,()=>Ze,(Z,ee)=>{ee(Z,{children:(ue,W)=>{var _e=U(),he=v(_e);xe(he,17,()=>i(V).headers,ce=>ce.id,(ce,te)=>{var fe=U(),ge=v(fe);d(ge,()=>ar,(Oe,Ge)=>{Ge(Oe,{children:(Ve,st)=>{var Ue=U(),Be=v(Ue);{var yt=He=>{const Pt=O(()=>i(te).getContext());ct(He,{get content(){return i(te).column.columnDef.header},get context(){return i(Pt)}})};pe(Be,He=>{i(te).isPlaceholder||He(yt)})}a(Ve,Ue)},$$slots:{default:!0}})}),a(ce,fe)}),a(ue,_e)},$$slots:{default:!0}})}),a(T,X)}),a(D,A)},$$slots:{default:!0}})});var q=b(I,2);d(q,()=>sr,(_,G)=>{G(_,{children:(D,z)=>{var A=U(),M=v(A);xe(M,17,()=>x.getRowModel().rows,T=>T.id,(T,V)=>{var X=U(),K=v(X);const Z=O(()=>i(V).getIsSelected()&&"selected");d(K,()=>Ze,(ee,ue)=>{ue(ee,{get"data-state"(){return i(Z)},onclick:W=>w(W,i(V)),children:(W,_e)=>{var he=U(),ce=v(he);xe(ce,17,()=>i(V).getVisibleCells(),te=>te.id,(te,fe)=>{var ge=U(),Oe=v(ge);d(Oe,()=>it,(Ge,Ve)=>{Ve(Ge,{children:(st,Ue)=>{const Be=O(()=>i(fe).getContext());ct(st,{get content(){return i(fe).column.columnDef.cell},get context(){return i(Be)}})},$$slots:{default:!0}})}),a(te,ge)}),a(W,he)},$$slots:{default:!0}})}),a(T,X)},T=>{var V=U(),X=v(V);d(X,()=>Ze,(K,Z)=>{Z(K,{children:(ee,ue)=>{var W=U(),_e=v(W);d(_e,()=>it,(he,ce)=>{ce(he,{get colspan(){return e.columns.length},class:"h-24 text-center",children:(te,fe)=>{E();var ge=B("No results.");a(te,ge)},$$slots:{default:!0}})}),a(ee,W)},$$slots:{default:!0}})}),a(T,V)}),a(D,A)},$$slots:{default:!0}})}),a(F,p)},$$slots:{default:!0}})}),J(k);var f=b(k,2),$=L(f);const P=O(()=>!x.getCanPreviousPage());$e($,{variant:"outline",size:"sm",onclick:()=>x.previousPage(),get disabled(){return i(P)},children:(r,c)=>{E();var F=B("Previous");a(r,F)},$$slots:{default:!0}});var H=b($,2);const s=O(()=>!x.getCanNextPage());$e(H,{variant:"outline",size:"sm",onclick:()=>x.nextPage(),get disabled(){return i(s)},children:(r,c)=>{E();var F=B("Next");a(r,F)},$$slots:{default:!0}}),J(f),J(y),a(t,y),ie(),u()}const Or=async(t,e)=>{t.stopPropagation(),oe(e,!1)};var Gr=R('<span class="sr-only">Open menu</span> <!>',1),Vr=R("<!> <!>",1),Ur=R("<!> <!> <!> <!> <!>",1),Br=R("<!> <!>",1),Hr=R('<div class="detailsBox svelte-1s1bsh0"><h2> <button class="close svelte-1s1bsh0">×</button></h2></div>'),Kr=R("<!> <!>",1);function Lr(t,e){le(e,!0);const[n,u]=Ee(),o=()=>me(qe,"$page",n),m=new URLSearchParams(o().url.search).get("code");let l=we(!1);const h=async()=>{if(confirm("Are you sure you want to delete this Challenge? This action is irreversible."))try{const k=await fetch(`http://localhost:1337/ctfs/${m}/challenges/${e.id}`,{method:"DELETE",credentials:"include"});k.ok?(de.update(j=>j.filter(f=>f.id!==e.id)),alert("Challenge deleted successfully")):(console.error("Delete request failed:",k),alert("Failed to delete the Challenge."))}catch(k){console.error("Error deleting Challenge:",k),alert("An error occurred while deleting the Challenge.")}},x=async()=>{navigator.clipboard.writeText(e.description),e.description===""?alert("No description for this event"):(oe(l,!i(l)),console.log(i(l)))};var w=Kr(),y=v(w);d(y,()=>nr,(C,k)=>{k(C,{children:(j,f)=>{var $=Br(),P=v($);d(P,()=>or,(s,r)=>{r(s,{child:(F,g)=>{$e(F,ne(()=>g==null?void 0:g().props,{variant:"ghost",size:"icon",class:"relative size-8 p-0",children:(I,q)=>{var _=Gr(),G=b(v(_),2);ur(G,{}),a(I,_)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var H=b(P,2);d(H,()=>lr,(s,r)=>{r(s,{children:(c,F)=>{var g=Ur(),p=v(g);d(p,()=>ir,(D,z)=>{z(D,{children:(A,M)=>{var T=Vr(),V=v(T);d(V,()=>cr,(K,Z)=>{Z(K,{children:(ee,ue)=>{E();var W=B("Actions");a(ee,W)},$$slots:{default:!0}})});var X=b(V,2);d(X,()=>Pe,(K,Z)=>{Z(K,{onclick:()=>navigator.clipboard.writeText(e.id),children:(ee,ue)=>{E();var W=B("Copy Challenge ID");a(ee,W)},$$slots:{default:!0}})}),a(A,T)},$$slots:{default:!0}})});var I=b(p,2);d(I,()=>dr,(D,z)=>{z(D,{})});var q=b(I,2);d(q,()=>Pe,(D,z)=>{z(D,{children:(A,M)=>{E();var T=B("View Active Members");a(A,T)},$$slots:{default:!0}})});var _=b(q,2);d(_,()=>Pe,(D,z)=>{z(D,{onclick:x,children:(A,M)=>{E();var T=B("View Challenge details");a(A,T)},$$slots:{default:!0}})});var G=b(_,2);d(G,()=>Pe,(D,z)=>{z(D,{onclick:h,children:(A,M)=>{E();var T=B("Delete Challenge");a(A,T)},$$slots:{default:!0}})}),a(c,g)},$$slots:{default:!0}})}),a(j,$)},$$slots:{default:!0}})});var S=b(y,2);{var N=C=>{var k=Hr(),j=L(k),f=L(j),$=b(f);$.__click=[Or,l],J(j),J(k),be(()=>vt(f,`${e.description??""} `)),a(C,k)};pe(S,C=>{i(l)&&C(N)})}a(t,w),ie(),u()}gr(["click"]);var Jr=R("Name <!>",1);function Qr(t,e){let n=Q(e,"variant",3,"ghost"),u=je(e,["$$slots","$$events","$$legacy","variant"]);$e(t,ne({get variant(){return n()}},()=>u,{children:(o,m)=>{E();var l=Jr(),h=b(v(l));hr(h,{class:"ml-2"}),a(o,l)},$$slots:{default:!0}}))}const de=Ct([]),gt=Ct(),Xr=[{accessorKey:"status",header:"Status",cell:({row:t})=>et(Ar,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:t})=>et(Qr,{onclick:()=>t.toggleSorting(t.getIsSorted()==="asc")})},{accessorKey:"active_members",header:()=>{const t=ht(()=>({render:()=>'<div class="text-right">Active Members</div>'}));return dt(t,"")},cell:({row:t})=>{const e=new Intl.NumberFormat("en-US",{style:"decimal"}),n=ht(u=>{const o=u();return{render:()=>`<div class="text-right font-medium">${o}</div>`}});return dt(n,e.format(parseFloat(t.getValue("active_members"))))}},{id:"actions",cell:({row:t})=>et(Lr,{id:t.original.id,description:t.original.description})}],Wr=ye.object({challengeName:ye.string().min(2).max(50),challengeDetails:ye.string().min(0).max(50),challengeFlag:ye.string().min(0).max(50)});var Yr=R("<!> <!>",1),Zr=R("<!> <!> <!>",1),es=R("<!> <!>",1),ts=R("<!> <!> <!>",1),rs=R("<!> <!>",1),ss=R("<!> <!> <!>",1),as=R('<form method="POST"><!> <!> <!> <!></form>');function ns(t,e){le(e,!0);const[n,u]=Ee(),o=()=>me(l,"$formData",n),m=Gt(e.data.form,{validators:Vt(Wr)}),{form:l,enhance:h}=m;let x="";kt(()=>{x=fr(qe).url.searchParams.get("code")||"",w()});const w=async()=>{try{de.set([]);const f=await fetch(`http://localhost:1337/ctfs/${x}/challenges`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(f.ok){let $=await f.json();Array.isArray($)&&$.length>0&&de.set($.map(P=>({name:P.challenge_name,active_members:0,status:"pending",id:P.challenge_id.toString(),hedgedoc_url:P.hedgedoc_url,description:P.challenge_description})))}else console.error("Failed to fetch challenges")}catch(f){console.error("Error occured",f)}},y=async f=>{f.preventDefault();const $=o().challengeName;if(!$)return;const P=o().challengeDetails,H=o().challengeFlag;try{const s=await fetch(`http://localhost:1337/ctfs/${x}/challenges`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:$,description:P,flag:H})});if(s.ok){const r=await s.json();let c={id:r.id,hedgedoc_url:r.hedgedoc_url,active_members:0,status:"pending",name:$,description:r.description};de.update(F=>[...F,c]),await w()}else{const r=await s.json();console.error("Failed to submit form:",r)}}catch(s){console.error("Unable to submit challenge",s)}};var S=as(),N=L(S);d(N,()=>We,(f,$)=>{$(f,{form:m,name:"challengeName",children:(P,H)=>{var s=Zr(),r=v(s);d(r,()=>Je,(g,p)=>{p(g,{children:(q,_)=>{let G=()=>_==null?void 0:_().props;var D=Yr(),z=v(D);d(z,()=>Ye,(M,T)=>{T(M,{children:(V,X)=>{E();var K=B("Challenge Name");a(V,K)},$$slots:{default:!0}})});var A=b(z,2);De(A,ne(G,{get value(){return o().challengeName},set value(M){Le(l,ve(o).challengeName=M,ve(o))}})),a(q,D)},$$slots:{default:!0}})});var c=b(r,2);d(c,()=>Qe,(g,p)=>{p(g,{children:(I,q)=>{E();var _=B("This sets the Challenge display name.");a(I,_)},$$slots:{default:!0}})});var F=b(c,2);d(F,()=>Xe,(g,p)=>{p(g,{})}),a(P,s)},$$slots:{default:!0}})});var C=b(N,2);d(C,()=>We,(f,$)=>{$(f,{form:m,name:"challengeDetails",children:(P,H)=>{var s=ts(),r=v(s);d(r,()=>Je,(g,p)=>{p(g,{children:(q,_)=>{let G=()=>_==null?void 0:_().props;var D=es(),z=v(D);d(z,()=>Ye,(M,T)=>{T(M,{children:(V,X)=>{E();var K=B("(Optional) Challenge Details");a(V,K)},$$slots:{default:!0}})});var A=b(z,2);De(A,ne(G,{get value(){return o().challengeDetails},set value(M){Le(l,ve(o).challengeDetails=M,ve(o))}})),a(q,D)},$$slots:{default:!0}})});var c=b(r,2);d(c,()=>Qe,(g,p)=>{p(g,{children:(I,q)=>{E();var _=B("Describe the details of this challenge");a(I,_)},$$slots:{default:!0}})});var F=b(c,2);d(F,()=>Xe,(g,p)=>{p(g,{})}),a(P,s)},$$slots:{default:!0}})});var k=b(C,2);d(k,()=>We,(f,$)=>{$(f,{form:m,name:"challengeFlag",children:(P,H)=>{var s=ss(),r=v(s);d(r,()=>Je,(g,p)=>{p(g,{children:(q,_)=>{let G=()=>_==null?void 0:_().props;var D=rs(),z=v(D);d(z,()=>Ye,(M,T)=>{T(M,{children:(V,X)=>{E();var K=B("(Optional) Challenge Flag");a(V,K)},$$slots:{default:!0}})});var A=b(z,2);De(A,ne(G,{get value(){return o().challengeFlag},set value(M){Le(l,ve(o).challengeFlag=M,ve(o))}})),a(q,D)},$$slots:{default:!0}})});var c=b(r,2);d(c,()=>Qe,(g,p)=>{p(g,{children:(I,q)=>{E();var _=B("The flag for this challenge");a(I,_)},$$slots:{default:!0}})});var F=b(c,2);d(F,()=>Xe,(g,p)=>{p(g,{})}),a(P,s)},$$slots:{default:!0}})});var j=b(k,2);d(j,()=>Ut,(f,$)=>{$(f,{children:(P,H)=>{E();var s=B("Submit");a(P,s)},$$slots:{default:!0}})}),J(S),Bt(S,f=>h==null?void 0:h(f)),vr("submit",S,y),a(t,S),ie(),u()}var os=R("<!> <!>",1),ls=R('<header class="logo-header svelte-1tu79z4"><div class="absolute left-4 top-4 md:left-8 md:top-7"><a href="/" class="logo svelte-1tu79z4"><span class="ctf svelte-1tu79z4">CTF</span> <span class="collab svelte-1tu79z4">Collab</span></a></div></header> <div class="page-container svelte-1tu79z4"><div class="container svelte-1tu79z4"><div class="horizontal-container svelte-1tu79z4"><header class="svelte-1tu79z4"><h1 class="chal-name svelte-1tu79z4"> </h1> <p class="svelte-1tu79z4">Manage your Challenge rooms.</p></header> <div class="button-container svelte-1tu79z4"><!></div></div> <!></div> <div class="container svelte-1tu79z4"><header class="svelte-1tu79z4"><h1 class="chal-name svelte-1tu79z4">Team Members</h1> <p class="svelte-1tu79z4">Invite team members to collaborate on challenges.</p></header></div></div>',1);function Ts(t,e){le(e,!0);const[n,u]=Ee(),o=()=>me(qe,"$page",n),m=()=>me(gt,"$currentCTF",n),l=()=>me(de,"$challenges",n);let h="";kt(()=>{h=o().url.searchParams.get("code")||"",x(),w()});const x=async()=>{try{const s=await fetch(`http://localhost:1337/ctfs/${h}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(s.ok){let r=await s.json();gt.set({ctf_id:r.id,ctf_author_id:r.author_id,ctf_description:r.description,ctf_name:r.name,start_date:r.start_date,end_date:r.end_date,phrase:r.phrase})}}catch{console.error("Error fetching current CTF")}},w=async()=>{try{de.set([]);const s=await fetch(`http://localhost:1337/ctfs/${h}/challenges`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(s.ok){let r=await s.json();Array.isArray(r)&&r.length>0&&de.set(r.map(c=>({name:c.challenge_name,active_members:0,status:"pending",id:c.challenge_id.toString(),hedgedoc_url:c.hedgedoc_url,description:c.challenge_description})))}else console.error("Failed to fetch challenges")}catch(s){console.error("Error occured",s)}};var y=ls(),S=b(v(y),2),N=L(S),C=L(N),k=L(C),j=L(k),f=L(j,!0);J(j),E(2),J(k);var $=b(k,2),P=L($);d(P,()=>Ht,(s,r)=>{r(s,{children:(c,F)=>{var g=os(),p=v(g);d(p,()=>Kt,(q,_)=>{_(q,{children:(G,D)=>{$e(G,{class:"new-ctf-button",children:(z,A)=>{E();var M=B("Add Challenge");a(z,M)},$$slots:{default:!0}})},$$slots:{default:!0}})});var I=b(p,2);d(I,()=>Lt,(q,_)=>{_(q,{children:(G,D)=>{ns(G,{get data(){return e.data}})},$$slots:{default:!0}})}),a(c,g)},$$slots:{default:!0}})}),J($),J(C);var H=b(C,2);qr(H,{get data(){return l()},columns:Xr}),J(N),E(2),J(S),be(()=>{var s;return vt(f,(s=m())==null?void 0:s.ctf_name)}),a(t,y),ie(),u()}export{Ts as component};
